$(document).ready(function(){function e(e,a,t){d.html("").append(e),$("#readme").prepend(t);for(var s,o=$("h6 a, h5 a, h4 a, h3 a, h2 a, h1 a"),c=$('#readme a[href^="#"]').not(".anchor"),i=a.split("/")[3],h=a.split("/")[4],l="https://raw.githubusercontent.com/"+i+"/"+h+"/master/",u="https://github.com/"+i+"/"+h+"/blob/master",p=$("img"),g=[],v=0,b=p.length;b>v;++v){var w=$(p[v]).attr("src");r(w)||(w=w.startsWith("/")?w:"/"+w,$(p[v]).attr("src",l+w))}for(var v=0,b=c.length;b>v;++v){var k=$(c[v]);k.attr({"class":"cate-anchor","data-anchor":$(c[v]).attr("href")}).removeAttr("href")}for(var v=0,b=o.length;b>v;++v)if(o[v].id=o[v].id.replace("user-content-",""),o[v].id){var C="";s=$(o[v]).parent()[0].nodeName,"H1"===s?C="cate-anchor-h1":"H2"===s?C="cate-anchor-h2":"H3"===s?C="cate-anchor-h3":"H4"===s?C="cate-anchor-h4":"H5"===s?C="cate-anchor-h5":"H6"===s&&(C="cate-anchor-h6"),m.append('<li class="'+C+'"><a class="cate-anchor" data-anchor="#'+o[v].id+'">'+$(o[v]).parent("h6, h5, h4, h3, h2, h1").text()+"</a></li>")}$(".cate-anchor").click(n),f.removeClass("content-hidden"),g=$("#readme a").not(".cate-anchor");for(var v=0,b=g.length;b>v;++v){var w=$(g[v]).attr("href");void 0===w||r(w)||(w=w.startsWith("/")?w:"/"+w,$(g[v]).attr({href:u+w})),$(g[v]).attr({target:"_blank"})}}function a(){var e=[],a=$(".awesome-cate");a.html(""),Object.keys(h).forEach(function(t){var r=t.replace(/\W/g,"").toLowerCase();e=e.concat(h[t]),a.append('<strong><i class="fa fa-terminal" style="color: gray;"></i> '+t+'</strong><li><ul class="'+r+'-ul"></ul></li>'),h[t].forEach(function(e){var a=$("."+r+"-ul"),t="";t=e.url.split("/").indexOf("github.com")>-1?'<li><a href="#repos/'+e.repo+'"><span><i class="fa fa-bookmark"></i> '+e.name+"</span></a></li>":'<li><a href="'+e.url+'" target="_blank"><span><i class="fa fa-bookmark"></i> '+e.name+"</span></a></li>",a.append(t)})});var t=$("#sidedrawer"),r=$("strong",t);r.next().hide(),r.off("click"),r.on("click",function(){r.not(this).next().hide(),$(this).next().slideToggle(300)}),o=new Fuse(e,l)}function t(e,a,t,r,n){var s="https://api.github.com/repos/"+e+"/"+a+"/readme";$.ajax({url:s,headers:{accept:"application/vnd.github.v3.html"},success:function(e){n(e,t,r)}})}function r(e){var a=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return a.test(e)}function n(e){var a=$(e.target).data("anchor"),t=$(a).offset().top-$("#header").height();$("html, body").animate({scrollTop:t},300)}var s,o,c=!1,i="https://raw.githubusercontent.com/lockys/awesome.json/master/awesome/awesome.json",h={},l={keys:["name"]},d=$(".readme-container"),u=$(".search-result"),p=$(".search-input-section"),m=$(".mui-dropdown__menu"),f=$(".mui-dropdown"),g=function(n,o){var i="https://github.com/"+n+"/"+o;if(c="awesome"===o?1:0,jsonURL="https://raw.githubusercontent.com/lockys/awesome.json/master/repo-json/"+n+"-"+o+".json",f.removeClass("content-hidden"),u.addClass("content-hidden"),u.html(""),m.html(""),$(".alert").html(""),$(".awesome-input").val(""),c)a(),f.addClass("content-hidden");else{var h='<a href="'+i+'" class="origin-repo-btn" target="_blank">View On <i class="fa fa-github"></i></a><a href="https://github.com/lockys/awesome-search/issues/new" target="_blank" class="origin-repo-btn"><i class="fa fa-exclamation-circle"></i> This Repo Has Some Issues</a><br/><br/>';d.html('<div class="sk-spinner sk-spinner-pulse"></div>'),t(n,o,i,h,e),$.getJSON(jsonURL,function(e){var a=e,t=[];return p.removeClass("content-hidden"),0===Object.keys(a).length?($(".alert").html('<span style="color: red;">This repo has not been parsed yet, we will support it soon.</span><br/>'),void p.addClass("content-hidden")):(a.forEach(function(e){if(!r(e.url)){var a=i.split("/")[3],n=i.split("/")[4],s="https://github.com/"+a+"/"+n+"/blob/master";e.url=s+e.url}t=t.concat(e)}),void(s=new Fuse(t,l)))})}};$("input").on("input",function(e){var a=$(e.target).hasClass("cate-input"),t=$(this).val(),r=15;u=a?$(".cate-search-result"):$(".search-result"),u.removeClass("content-hidden"),u.html(""),t||u.addClass("content-hidden");var n=a?o.search(t):s.search(t),i="";n.length||u.html("No result :(");for(var h=0,l=r;l>h;++h)if(n[h]){var d=(n[h].name.replace(/\W/g,"").toLowerCase(),' href="'+n[h].url+'" ');c&&(d=""),i=n[h].description?" - "+n[h].description+"</br>":"<br/>",a?n[h].url.split("/").indexOf("github.com")>-1?u.append('<a href="#/repos/'+n[h].repo+'">'+n[h].name+"</a>"+i):u.append('<a href="'+n[h].url+'" target="_blank">'+n[h].name+"</a>"+i):u.append('<a href="'+n[h].url+'" class="search-repo-link"'+d+'target="_blank">'+n[h].name+"</a>"+i)}});var v=Backbone.Router.extend({routes:{"repos/:maintainer/:repo":"getRepos","":"getAwesome"}}),b=new v;b.on("route:getRepos",function(e,a){$(".search-holder").html("Search "+a),g(e,a)}),b.on("route:getAwesome",function(){g("sindresorhus","awesome")}),$("body").click(function(e){$(e.target).hasClass("awesome-input")||$(e.target).hasClass("search-result")||$(e.target).hasClass("search-icon")||($(".awesome-input").val(""),$(".search-result").addClass("content-hidden"),$(".search-input").removeClass("hovered")),$(e.target).hasClass("cate-input")||$(e.target).hasClass("cate-search-result")||($(".cate-input").val(""),$(".cate-search-result").addClass("content-hidden"))}),$(".home-button").click(function(){event.preventDefault(),console.log(""),window.location.hash="/",location.reload()}),$.getJSON(i,function(e){h=e,g("sindresorhus","awesome")}),Backbone.history.start()}),jQuery(function(e){function a(){var a={onclose:function(){n.removeClass("active").appendTo(document.body)}},t=e(mui.overlay("on",a));n.appendTo(t),setTimeout(function(){n.addClass("active")},20)}function t(){r.toggleClass("hide-sidedrawer")}var r=e("body"),n=e("#sidedrawer");e(".js-show-sidedrawer").on("click",a),e(".js-hide-sidedrawer").on("click",t),e(".to-top-arrow").click(function(){return e("html, body").animate({scrollTop:0},600),!1})});