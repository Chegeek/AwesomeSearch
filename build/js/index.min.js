$(document).ready(function(){function e(e,a){var t=e.split("/")[3],s=e.split("/")[4],n="https://api.github.com/repos/"+t+"/"+s+"/readme";$.ajax({url:n,headers:{accept:"application/vnd.github.v3.html"},success:a})}function a(e){var a=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return a.test(e)}function t(e){var a=$(e.target).data("anchor"),t=$(a).offset().top-$("#header").height();$("html, body").animate({scrollTop:t},300)}var s,n,r=!0,o=!1,l="https://raw.githubusercontent.com/lockys/awesome.json/master/name-map/awesome.json",c={keys:["name"]},i=$(".readme-container"),h=$(".search-result"),d=$(".search-input-section"),u=$(".mui-dropdown__menu"),m=$(".mui-dropdown"),p=function(l,p){var f="awesome";if(o="awesome"===p?1:0,r=!o,jsonURL="https://raw.githubusercontent.com/lockys/awesome.json/master/output/"+p+".json",awesomeJsonURL="https://raw.githubusercontent.com/lockys/awesome.json/master/awesome/awesome.json",m.removeClass("content-hidden"),h.addClass("content-hidden"),h.html(""),u.html(""),$(".alert").html(""),$(".awesome-input").val(""),o)$(".cate").html(f),$.getJSON(awesomeJsonURL,function(e){var a=e,t=[],s=$(".awesome-cate");s.html(""),Object.keys(a).forEach(function(e){var n=e.replace(/\W/g,"").toLowerCase();t=t.concat(a[e]),s.append('<strong><i class="fa fa-terminal" style="color: gray;"></i> '+e+'</strong><li><ul class="'+n+'-ul"></ul></li>'),a[e].forEach(function(e){var a=$("."+n+"-ul"),t=e.name.replace(/\W/g,"").toLowerCase(),s="";e.description?" - "+e.description:"";s=e.url.split("/").indexOf("github.com")>-1?'<li><a class="'+t+'" href="#repos/'+t+'" data-url="'+e.url+'" data-name="'+e.name+'"><span class="" data-url="'+e.url+'" data-name="'+e.name+'"><i class="fa fa-bookmark"></i> '+e.name+"</span></a></li>":'<li><a class="'+t+'" href="'+e.url+'" data-name="'+e.name+'" target="_blank"><span class="" data-url="'+e.url+'" data-name="'+e.name+'"><i class="fa fa-bookmark"></i> '+e.name+"</span></a></li>",a.append(s)})});var r=$("#sidedrawer"),o=$("strong",r);o.next().hide(),o.off("click"),o.on("click",function(){o.not(this).next().hide(),$(this).next().slideToggle(300)}),n=new Fuse(t,c)}),m.addClass("content-hidden");else{var g=l.url,v='<a href="'+g+'" class="origin-repo-btn" target="_blank">View On <i class="fa fa-github"></i></a><a href="https://github.com/lockys/awesome-search/issues/new" target="_blank" class="origin-repo-btn"><i class="fa fa-exclamation-circle"></i> This Repo Has Some Issues</a><br/><br/>';f=l.name,$(".cate").html(f),i.html('<div class="sk-spinner sk-spinner-pulse"></div>'),e(g,function(e){i.html("").append(e),$("#readme").prepend(v);for(var s,n=$("h6 a, h5 a, h4 a, h3 a, h2 a, h1 a"),r=$('#readme a[href^="#"]').not(".anchor"),o=g.split("/")[3],l=g.split("/")[4],c="https://raw.githubusercontent.com/"+o+"/"+l+"/master/",h="https://github.com/"+o+"/"+l+"/blob/master",d="style=",p=$("img"),f=$('#readme a[href^="/"]'),w=0,b=f.length;b>w;++w){var k=$(f[w]).attr("href");a(k)||$(f[w]).attr({href:h+k,target:"_blank"})}for(var w=0,b=p.length;b>w;++w){var k=$(p[w]).attr("src");a(k)||$(p[w]).attr("src",c+k)}for(var w=0,b=r.length;b>w;++w){var C=$(r[w]);C.attr("class","cate-anchor"),C.attr("data-anchor",$(r[w]).attr("href")),C.removeAttr("href")}for(var w=0,b=n.length;b>w;++w)n[w].id=n[w].id.replace("user-content-",""),d="style=",n[w].id&&(s=$(n[w]).parent()[0].nodeName,"H1"===s?d+='"font-size: 18px;"':"H2"===s?d+='"font-size: 16px; color:#3C3C3C;"':"H3"===s?d+='"font-size: 14px; color:#7B7B7B;"':"H4"===s?d+='"font-size: 12px; color:#ADADAD;"':"H5"===s?d+='"font-size: 12px; color:#D9006C;"':"H6"===s&&(d+='"font-size: 12px; color:#EA0000;"'),u.append('<li><a class="cate-anchor" '+d+' data-anchor="#'+n[w].id+'">'+$(n[w]).parent("h6, h5, h4, h3, h2, h1").text()+"</a></li>"));$(".cate-anchor").click(t),m.removeClass("content-hidden")}),$.getJSON(jsonURL,function(e){var a=e,t=[];return d.removeClass("content-hidden"),0===Object.keys(a).length?(r=!1,$(".alert").html('<span style="color: red;">This repo has not been parsed yet, we will support it soon.</span><br/>'),void d.addClass("content-hidden")):(a.forEach(function(e){t=t.concat(e)}),void(s=new Fuse(t,c)))})}};$("input").on("input",function(e){var a=$(e.target).hasClass("cate-input"),t=$(this).val(),l=15;h=a?$(".cate-search-result"):$(".search-result"),h.removeClass("content-hidden"),h.html(""),t||h.addClass("content-hidden");var c=a?n.search(t):s.search(t),i="";c.length||h.html("No result :(");for(var d=0,u=l;u>d;++d)if(c[d]){var m=c[d].name.replace(/\W/g,"").toLowerCase(),p=' href="'+c[d].url+'" ';o&&(p=""),i=c[d].description?" - "+c[d].description+"</br>":"<br/>",r&&!a?h.append('<a class="'+m+' search-repo-link"'+p+'data-url="'+c[d].url+'" data-name="'+c[d].name+'" target="_blank">'+c[d].name+"</a>"+i):c[d].url.split("/").indexOf("github.com")>-1?h.append('<a class="'+m+' search-repo-link" data-url="'+c[d].url+'" data-name="'+c[d].name+'" href="#/repos/'+m+'">'+c[d].name+"</a>"+i):h.append('<a class="'+m+' search-repo-link" data-url="'+c[d].url+'" data-name="'+c[d].name+'" href="'+c[d].url+'" target="_blank">'+c[d].name+"</a>"+i)}});var f=Backbone.Router.extend({routes:{"repos/:cate":"getRepos","":"getAwesome"}}),g=new f;g.on("route:getRepos",function(e){var a={};$.getJSON(l,function(t){for(var s=t,n=Object.keys(s),r=0,o=n.length;o>r;++r)if(n[r].replace(/\W/g,"").toLowerCase()===e){a={name:n[r],url:s[n[r]]},$(".search-holder").html("Search the "+a.name),p(a,e);break}})}),g.on("route:getAwesome",function(){p(null,"awesome")}),$("body").click(function(e){$(e.target).hasClass("home-button")&&(e.preventDefault(),window.location.hash="/",location.reload()),$(e.target).hasClass("awesome-input")||$(e.target).hasClass("search-result")||$(e.target).hasClass("search-icon")||($(".awesome-input").val(""),$(".search-result").addClass("content-hidden"),$(".search-input").removeClass("hovered")),$(e.target).hasClass("cate-input")||$(e.target).hasClass("cate-search-result")||($(".cate-input").val(""),$(".cate-search-result").addClass("content-hidden"))}),p(null,"awesome"),Backbone.history.start()}),jQuery(function(e){function a(){var a={onclose:function(){n.removeClass("active").appendTo(document.body)}},t=e(mui.overlay("on",a));n.appendTo(t),setTimeout(function(){n.addClass("active")},20)}function t(){s.toggleClass("hide-sidedrawer")}var s=e("body"),n=e("#sidedrawer");e(".js-show-sidedrawer").on("click",a),e(".js-hide-sidedrawer").on("click",t),e(".to-top-arrow").click(function(){return console.log(e("html, body")),e("html, body").animate({scrollTop:0},600),!1})});